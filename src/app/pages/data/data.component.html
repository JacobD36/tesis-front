<div class="row pt-5">
  <div class="col-12 pt-3">
    <p *ngFor="let alert of alerts">
      <ngb-alert [type]="alert.type" (closed)="close(alert)">{{ alert.message }}</ngb-alert>
    </p>
  </div>
</div>
<form autocomplete="off" (ngSubmit)="sendData()" [formGroup]="dataForm">
  <div class="p-3">
    <div class="row">
      <div class="col-12 mb-3" style="text-align: justify;">
        <h4 class="pb-3">¡Bienvenido a nuestra prueba psicológica en línea!</h4>
        <p class="pb-3">Estoy encantada de que hayas decidido participar en esta prueba psicológica en línea. Está prueba tiene como objetivo la evaluación de los tipos caracterológicos y el nivel de sentido de vida con fines académicos. Asímismo, se recalca que el instrumento utilizado será tratado con el cuidado que se requiere y no implica ningún riesgo, pues son procedimientos utilizados en la investigación psicológica. De igual manera, el personal que realizará la evaluación es personal calificado. Antes de comenzar, queremos asegurarnos de que te sientas cómodo y tranquilo, por lo que te proporcionaremos algunas instrucciones importantes:</p>
        <ol>
          <li class="mb-2"><strong>Privacidad y Confidencialidad:</strong> Puedes responder con sinceridad, ya que tus respuestas son totalmente confidenciales. Nadie más tendrá acceso a tus resultados, y no se compartirán con terceros.</li>
          <li class="mb-2"><strong>Sincera Reflexión:</strong> Te animamos a responder con honestidad y reflexión. No hay respuestas correctas ni incorrectas, ya que esta prueba se trata de conocer más sobre ti mismo.</li>
          <li><strong>Tiempo:</strong> Tómate el tiempo que necesites para responder. No hay límite de tiempo, así que siéntete libre de reflexionar en cada pregunta.</li>
        </ol>
        <br>
        <p><strong>Gracias por participar en esta experiencia de autoexploración. ¡Te deseamos una experiencia enriquecedora! Ahora, te pediremos un poco de información:</strong></p>
      </div>
      <div class="col-12 mb-3">
        <h3>Información del evaluado</h3>
        <hr>
      </div>
      <div class="col-sm-6 col-xs-12 mb-3">
        <label for="edad" class="form-label">Edad</label>
        <input
            type="number"
            class="form-control"
            id="edad"
            placeholder="Ingrese su edad..."
            formControlName="edad"
            (keypress)="utilsService.restrictNumeric($event)"
            [class.is-invalid]="invalidField('edad')">
      </div>
      <div class="col-sm-6 col-xs-12 mb-3">
        <label for="genero" class="form-label">Género</label>
        <select class="form-select" id="genero" formControlName="genero" [class.is-invalid]="invalidField('genero')">
          <option value="" selected>Seleccione su género...</option>
          <option *ngFor="let genero of generoList" [value]="genero.value">{{genero.viewValue}}</option>
        </select>
      </div>
      <div class="col-sm-6 col-xs-12 mb-3" *ngIf="dataForm.get('genero')?.value === 'O'">
        <label for="genero_otro" class="form-label">&nbsp;</label>
        <input
            type="text"
            class="form-control"
            id="genero_otro"
            placeholder="Especifique género..."
            formControlName="genero_otro"
            [class.is-invalid]="invalidField('genero_otro')">
      </div>
      <div class="col-sm-6 col-xs-12 mb-3">
        <label for="distrito" class="form-label">Distrito</label>
        <select class="form-select" id="distrito" formControlName="distrito" [class.is-invalid]="invalidField('distrito')">
          <option value="" selected>Seleccione su distrito...</option>
          <option *ngFor="let distrito of distritosLima" [value]="distrito.viewValue">{{distrito.viewValue}}</option>
        </select>
      </div>
      <div class="col-sm-6 col-xs-12 mb-3">
        <label class="form-label">¿Actualmente, es usted estudiante universitario de pregrado?</label>
        <div>
          <div class="form-check-inline">
            <input class="form-check-input" type="radio" id="es_estudiante1" value="SI" formControlName="es_estudiante" [class.is-invalid]="invalidField('es_estudiante')">
            <label class="form-check-label" for="es_estudiante1">
              &nbsp;&nbsp;Si
            </label>
          </div>
          <div class="form-check-inline">
            <input class="form-check-input" type="radio" id="es_estudiante2" value="NO" formControlName="es_estudiante" [class.is-invalid]="invalidField('es_estudiante')">
            <label class="form-check-label" for="es_estudiante2">
              &nbsp;&nbsp;No
            </label>
          </div>
        </div>
      </div>
      <div class="col-sm-6 col-xs-12 mb-3" *ngIf="dataForm.get('es_estudiante')?.value === 'SI'">
        <label for="carrera" class="form-label">¿Qué carrera universitaria estudia?</label>
        <select class="form-select" id="carrera" formControlName="carrera" [class.is-invalid]="invalidField('carrera')">
          <option value="" selected>Seleccione su carrera...</option>
          <option *ngFor="let carrera of carreraList" [value]="carrera.value">{{carrera.viewValue}}</option>
        </select>
      </div>
      <div class="col-sm-6 col-xs-12 mb-3" *ngIf="dataForm.get('es_estudiante')?.value === 'SI'">
        <label for="ciclo" class="form-label">¿Qué ciclo académico cursa actualmente?</label>
        <select class="form-select" id="ciclo" formControlName="ciclo" [class.is-invalid]="invalidField('ciclo')">
          <option value="" selected>Seleccione su ciclo académico...</option>
          <option *ngFor="let ciclo of cicloList" [value]="ciclo.value">{{ciclo.viewValue}}</option>
        </select>
      </div>
      <div class="col-sm-6 col-xs-12 mb-3">
        <label class="form-label">¿Es usted padre/madre de familia?</label>
        <div>
          <div class="form-check-inline">
            <input class="form-check-input" type="radio" id="tiene_hijos1" value="SI" formControlName="tiene_hijos" [class.is-invalid]="invalidField('tiene_hijos')">
            <label class="form-check-label" for="tiene_hijos1">
              &nbsp;&nbsp;Si
            </label>
          </div>
          <div class="form-check-inline">
            <input class="form-check-input" type="radio" id="tiene_hijos2" value="NO" formControlName="tiene_hijos" [class.is-invalid]="invalidField('tiene_hijos')">
            <label class="form-check-label" for="tiene_hijos2">
              &nbsp;&nbsp;No
            </label>
          </div>
        </div>
      </div>
      <div class="col-sm-6 col-xs-12 mb-3" *ngIf="dataForm.get('tiene_hijos')?.value === 'SI'">
        <label for="hijos" class="form-label">Número de hijos</label>
        <input
            type="number"
            class="form-control"
            id="hijos"
            placeholder="Ingrese su número de hijos..."
            (keypress)="utilsService.restrictNumeric($event)"
            formControlName="hijos"
            [class.is-invalid]="invalidField('hijos')">
      </div>
      <div class="col-sm-6 col-xs-12 mb-3">
        <label class="form-label">¿Labora actualmente?</label>
        <div>
          <div class="form-check-inline">
            <input class="form-check-input" type="radio" id="labora1" value="SI" formControlName="esta_laborando" [class.is-invalid]="invalidField('esta_laborando')">
            <label class="form-check-label" for="labora1">
              &nbsp;&nbsp;Si
            </label>
          </div>
          <div class="form-check-inline">
            <input class="form-check-input" type="radio" id="labora2" value="NO" formControlName="esta_laborando" [class.is-invalid]="invalidField('esta_laborando')">
            <label class="form-check-label" for="labora2">
              &nbsp;&nbsp;No
            </label>
          </div>
        </div>
      </div>
      <div class="col-sm-6 col-xs-12 mb-3" *ngIf="dataForm.get('esta_laborando')?.value === 'SI'">
        <label for="puesto" class="form-label">Puesto de trabajo</label>
        <input type="text" class="form-control" id="puesto" placeholder="Ingrese su puesto de trabajo actual..." formControlName="puesto" [class.is-invalid]="invalidField('puesto')">
      </div>
      <div class="col-sm-6 col-xs-12 mb-3">
        <label for="dependencia" class="form-label">¿Actualmente vive con sus padres o es independiente?</label>
        <select class="form-select" id="dependencia" formControlName="dependencia" [class.is-invalid]="invalidField('dependencia')">
          <option value="" selected>Seleccione su situación de dependencia...</option>
          <option *ngFor="let dependencia of dependenciaList" [value]="dependencia.value">{{dependencia.viewValue}}</option>
        </select>
      </div>
      <div class="col-sm-6 col-xs-12 mb-3">
        <label for="grado" class="form-label">Grado Académico de Padre</label>
        <select class="form-select" id="grado_padre" formControlName="grado_padre" [class.is-invalid]="invalidField('grado_padre')">
          <option value="" selected>Seleccione el grado académico...</option>
          <option *ngFor="let grado of grados" [value]="grado.viewValue">{{grado.viewValue}}</option>
        </select>
      </div>
      <div class="col-sm-6 col-xs-12 mb-3">
        <label for="grado" class="form-label">Grado Académico de Madre</label>
        <select class="form-select" id="grado_madre" formControlName="grado_madre" [class.is-invalid]="invalidField('grado_madre')">
          <option value="" selected>Seleccione el grado académico...</option>
          <option *ngFor="let grado of grados" [value]="grado.viewValue">{{grado.viewValue}}</option>
        </select>
      </div>
    </div>
  </div>
  <hr>
  <div class="row">
    <div class="col-12 pt-3 pb-2">
      <div class="form-check">
        <input class="form-check-input" type="checkbox" id="auth_chk" (change)="checkboxChanged()">
        <label class="form-check-label" for="auth_chk">
          Comprendo el objetivo de la prueba y acepto voluntariamente ser evaluado/a con el <strong>TEST CARACTEROLÓGICO DE GASTÓN BERGER y el TEST DE PRÓPOSITO VITAL (PIL)</strong>.
        </label>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col d-flex justify-content-end">
      <button
          class="btn btn-primary mb-5 mt-4"
          style="width: 150px;"
          [disabled]="this.dataForm.invalid || loading || this.auth == false"><i *ngIf="loading" class="fas fa-spinner fa-pulse"></i> Ingresar</button>
    </div>
  </div>
</form>
